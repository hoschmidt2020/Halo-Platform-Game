//----------------------------------------------------------------------------------|
// Henry Schmidt
// October 16th, 2021
// Brick Class; a sprite subclass, this is the main object of the game that mario
// interacts with
//----------------------------------------------------------------------------------|

import java.util.ArrayList;
import java.awt.image.BufferedImage;
import java.awt.Graphics;

class Brick extends Sprite{
	
	Model model;
	BufferedImage image = null;
	
	// |-------------------------------------------------------------------------------------------------------------------|
	//  Constructor
	// |-------------------------------------------------------------------------------------------------------------------|
	Brick(Model m){
		model = m;
		x = 0;
		y = 0;
		w = 0;
		h = 0;
	}
	
	// |-------------------------------------------------------------------------------------------------------------------|
	//  Constructor
	// |-------------------------------------------------------------------------------------------------------------------|
	Brick(int x1, int y1, int w1, int h1, Model m){
		x = x1;
		y = y1;
		w = w1;
		h = h1;
		model = m;
	}
	
	// |-------------------------------------------------------------------------------------------------------------------|
	//  Copy Constructor
	// |-------------------------------------------------------------------------------------------------------------------|
	Brick(Brick brick, Model m){
		x = brick.x;
		y = brick.y;
		w = brick.w;
		h = brick.h;
		model = m;
	}
	
	// |-------------------------------------------------------------------------------------------------------------------|
	//  Unmarshal json object variables
	// |-------------------------------------------------------------------------------------------------------------------|
	Brick(Json ob, Model m){
		x = (int)ob.getLong("x");
		y = (int)ob.getLong("y");
		w = (int)ob.getLong("w");
		h = (int)ob.getLong("h");
		model = m;
	}
	
	// |-------------------------------------------------------------------------------------------------------------------|
	//  Brick Marshaler
	// |-------------------------------------------------------------------------------------------------------------------|
	Json marshal()
     {	 
	     Json ob = Json.newObject();
         ob.add("x", x);
		 ob.add("y", y);
		 ob.add("w", w);
		 ob.add("h", h); 
		 return ob;
    }
	
	//-----------------------------------------------------------------------------------------------------|
	// Sprite abstract method; update any variables if necessary
	//-----------------------------------------------------------------------------------------------------|
	boolean update(){
		return true;
	}
	
	//-----------------------------------------------------------------------------------------------------|
	// Sprite abstract method; draw the designated brick to the screen
	//-----------------------------------------------------------------------------------------------------|
	void draw(Graphics g){
		
		if(image == null){
			image = View.loadImage("Steel_Block2.png");
		}
		
		g.drawImage(this.image, this.x - model.mario.x + model.mario.marioScreenLocation, this.y, this.w, this.h, null);
	}
	
	//-----------------------------------------------------------------------------------------------------|
	// Determine whether this sprite object is mario; yes
	//-----------------------------------------------------------------------------------------------------|
	@Override
	boolean isBrick(){
		return true;
	}
	
	// |-------------------------------------------------------------------------------------------------------------------|
	//  toString for Brick
	// |-------------------------------------------------------------------------------------------------------------------|
	@Override
	public String toString(){
		return "Brick: (" + x + ", " + y + ") w: " + w + " h: " + h;
	}
	

}